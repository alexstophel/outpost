<%# Renders a user avatar with fallback to initials %>
<%# Locals: user (required), size: "xs" | "sm" | "md" | "lg" (default: "md") %>
<% size ||= "md" %>
<% size_classes = case size
   when "xs" then "w-6 h-6 text-[10px]"
   when "sm" then "w-8 h-8 text-xs"
   when "md" then "w-10 h-10 text-sm"
   when "lg" then "w-16 h-16 text-xl"
   else "w-8 h-8 text-xs"
   end %>
<% variant_key = %w[xs sm md lg].include?(size) ? size.to_sym : :sm %>

<div class="<%= size_classes %> bg-neutral-700 border border-neutral-600 flex-shrink-0 flex items-center justify-center text-neutral-400 overflow-hidden font-mono">
  <% if user.avatar.attached? %>
    <%= image_tag url_for(user.avatar.variant(variant_key)), class: "w-full h-full object-cover" %>
  <% else %>
    <%= user.name.first.upcase %>
  <% end %>
</div>
